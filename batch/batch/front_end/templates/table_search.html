{% from "components/utils.html" import submit_button %}
{% macro table_search(component_name, endpoint) %}
<form id='{{ component_name }}-form' class='min-h-48 flex space-x-4' method="GET" action="{{ endpoint }}">
  <div class='basis-2/3'>
    <textarea id='{{ component_name }}-input-box' class='h-full w-full p-4 bg-zinc-200 rounded resize whitespace-pre'
      spellcheck="false" autocorrect="off" autofocus name="q">{% if q %}{{ q }}{% endif %}</textarea>
  </div>
  <div class='flex flex-col justify-between'>
    <a href="https://hail.is/docs/batch/advanced_search_help.html" target="_blank">
      <span class="material-symbols-outlined">help</span>
    </a>
    {{ submit_button('Search') }}
  </div>
</form>
<script>
  document.getElementById("{{ component_name }}-input-box")
    .addEventListener("keydown", function (e) {
      if (e.key === "Enter" && (e.metaKey || e.ctrlKey)) {
        e.preventDefault();
        document.getElementById("{{ component_name }}-form").submit();
      }
    });
</script>
{% endmacro %}
